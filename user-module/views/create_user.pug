extends layout

block content 
    h1 #{title}
    p   
        em Please complete the form below.
    form(method='POST', action="/register")
        #form-group
            label Username: 
            input.form-control(name="username", type="text")
        br
        #form-group
            label Password: 
            input.form-control(name="password", type="password")
        br
        #form-group
            label First Name: 
            input.form-control(name="first_name", type="text")
        br
        #form-group
            label Last Name: 
            input.form-control(name="last_name", type="text")
        br
        #form-group
            label Email Address:  
            input.form-control(name="email", type="text")
        br
        #form-group
            label Street Address: 
            input.form-control(name="street", type="text")
        br
        #form-group
            label City/Town: 
            input.form-control(name="city", type="text")
        br
        #form-group
            label Province/Territory: 
            select.form-control(name="province")
                option(value="BC") British Columbia / Colombie-Britannique
                option(value="AB") Alberta
                option(value="SK") Saskatchewan
                option(value="MB") Manitoba
                option(value="ON") Ontario
                option(value="QC") Québec
                option(value="NB") New Brunswick / Nouveau-Brunswick
                option(value="PE") Prince Edward Island / Île-du-Prince-Édouard
                option(value="NS") Nova Scotia / Nouvelle-Écosse
                option(value="NL") Newfoundland and Labrador / Terre-Neuve-et-Labrador
                option(value="YT") Yukon
                option(value="NT") Northwest Territories / Territoires du Nord-Ouest
                option(value="NU") Nunavut
        br
        #form-group
            label Postal Code: 
            input.form-control(name="postal_code", type="text")
        br
        input.btn.btn-primary(type="submit" disabled)

block script
    script.
    
        function isEmpty(){
            if ($("[name='username']").val() && $("[name='password']").val() && $("[name='first_name']").val() && $("[name='last_name']").val() && $("[name='email']").val() && $("[name='street']").val() && $("[name='city']").val() && $("[name='postal_code']").val()){
                return false;
            }
            else
                return true;
        }

        function isValidEmail() {
            if ($("[name='email']").val().match(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/)){
                return true;
            }
            else
                return false;
        }
        
        function isValidPostalCode() {
            if ($("[name='postal_code']").val().match(/[A-Z]\d[A-Z]\s\d[A-Z]\d/)) {
                return true;
            }
            else
                return false;
        }
        
        function isValid() {
            return !isEmpty() && isValidEmail() && isValidPostalCode();
        };

        $(document).ready(function() {
            $("[name='username']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='password']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='first_name']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='last_name']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='email']").change(function() {
                if (isValid() && isValidEmail()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='street']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='city']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='province']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
            $("[name='postal_code']").change(function() {
                if (isValid()) {
                    $('input.btn').removeAttr('disabled');
                }
                else if (!isValid()) {
                    $('input.btn').attr('disabled', 'true');
                }
            });
        });